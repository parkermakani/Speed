modules = ["nodejs-20", "python-3.12"]

run = "bash replit-run.sh"

language = "bash"

[deployment]
build = ["sh","-c","export VITE_API_BASE_URL= && npm --prefix frontend ci --legacy-peer-deps && npm --prefix frontend run build && pip install --no-cache-dir -r backend/requirements.txt"]
run = ["sh","-c","bash replit-run.sh"]

[nix]
channel = "stable-25_05"

[[ports]]
localPort = 8000
externalPort = 8000
